/**
 * * Auto generated by Bossssoft Studio version 1.0 beta
 * Sat Oct 08 14:08:09 CST 2016
 */
//define(['引入外部js模块或控件'],function('引入外部js或控件的别名'){})
define(
		[ 
		  "app/widgets/window/app-dialog",
		  "app/app-pagebase","resources/egov/js/aims/tperson/tperson_add.js"],
		function(Dialog,PageBase,dlg) {
		   var TPersonModel = PageBase.extend({
		             //类初始化
		            initialize : function() {
						TPersonModel.superclass.initialize.call(this);
					},
					//控件监听事件  格式：#控件id#:{事件名:事件方法}
					listeners:{
					    //新增按钮事件
						tPersonPage_btnAdd:{
							click: function(){
							dlg.showPage(dlg.ACTION.ADD,null,function(){
								 TPersonModel.getInstance().refreshData();
							})
							}
						},
						//新增按钮事件
						tPersonPage_btnQuery:{
							click:function(){
								$("#tPersonPage_query").xquery("toggle");
							}
						}	
					},
					//页面加载后初始化
					initPage:function(){
						
							
					},
					//显示查看业
					showViewPage:function(data,e){
					    var _self=this;
						dlg.showPage(dlg.ACTION.VIEW,data,function(){
							_self.refreshData();
						});
					},
					refreshData:function(){
						$("#tPersonPage_grid").grid("reload");
					},
					//显示编辑业
					showEditPage:function(data,e){
						 var _self=this;
						dlg.showPage(dlg.ACTION.EDIT,data,function(){
						     _self.refreshData();
						});
					},
					doDeleteData:function(data,e){
						 var _self=this;
						 $messager.confirm("确认删除当前记录吗？", {
							okCall : function() {
								var url = "egov/aims/tperson/doDelete.do";
								$app.ajax.ajaxCall({
									url : url,
									data : data,
									callback : function() {
										_self.refreshData();
										
									}
								});
							}
						});
					},
					
					//控件属性重置
					initUIExtConfig : function() {
					    var _self=this;
						this.uiExtConfig={
							//格式 #控件id#:function(控件属性集类){ config.setAttr("控件属性名","属性值"),// 网格，下拉网格，特殊设置config.getColumn("网列id").setAttr("列属性名","列属性值")config.getButton("网格内包含的按钮id").setAttr("handler","点击事件")  }
							tPersonPage_grid:function(config){
								config.getButton("tPersonPage_grid_btnEdit").setAttr("handler",_self.showEditPage);
								config.getButton("tPersonPage_grid_btnView").setAttr("handler",_self.showViewPage);
								config.getButton("tPersonPage_grid_btnDel").setAttr("handler",_self.doDeleteData);
							}
						
						}
					}

		 });
		 TPersonModel.getInstance=function(){
		     if (!this.instance){
		    	 this.instance =new TPersonModel();
		     }
		     return this.instance;
		 }
		
		 return  TPersonModel.getInstance();
	   })